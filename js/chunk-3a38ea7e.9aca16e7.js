(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a38ea7e"],{2762:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"test-page"},[s("el-page-header",{attrs:{content:e.$route.name},on:{back:function(t){return e.$router.back()}}}),s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[s("el-form-item",{attrs:{label:"设备编码"}},[s("el-input",{attrs:{placeholder:"设备编码",clearable:""},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),s("el-form-item",{attrs:{label:"设备区域"}},[s("el-select",{attrs:{placeholder:"设备区域",clearable:""},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},e._l(e.setData,(function(e,t){return s("el-option",{key:t,attrs:{label:e.address,value:e.address}})})),1)],1),s("el-form-item",[s("el-button",{attrs:{type:"info"},on:{click:e.onSubmit}},[e._v("查询")])],1),s("el-form-item",{staticClass:"right"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增")]),s("el-button",{attrs:{type:"success",icon:"el-icon-document-checked"},on:{click:e.exportClick}},[e._v("导出")])],1)],1),s("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"100",align:"center"}}),s("el-table-column",{attrs:{prop:"name",label:"设备点位",width:"200",align:"center"}}),s("el-table-column",{attrs:{prop:"codding",label:"设备编码",width:"200",align:"center"}}),s("el-table-column",{attrs:{prop:"address",label:"所属区域",width:"250",align:"center"}}),s("el-table-column",{attrs:{prop:"user",label:"创建人",width:"200",align:"center"}}),s("el-table-column",{attrs:{prop:"address",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.handleClick(t.row)}}},[e._v("修改")]),s("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(s){return s.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v("删除")])]}}])})],1),s("el-pagination",{staticStyle:{"text-align":"center","margin-top":"16px"},attrs:{layout:"prev, pager, next",total:e.tableCount}}),s("el-dialog",{attrs:{title:"新增设备",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{staticClass:"from-window",attrs:{model:e.form,"label-width":"100px"}},[s("el-form-item",{attrs:{prop:"region",label:"设备点位:",required:!0}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设备点位"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},e._l(e.posData,(function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),s("el-form-item",{attrs:{prop:"name",label:"设备编码:",required:!0}},[s("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"设备编码",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("el-form-item",{attrs:{prop:"regions",label:"所属区域:",required:!0}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属区域"},model:{value:e.form.regions,callback:function(t){e.$set(e.form,"regions",t)},expression:"form.regions"}},e._l(e.setData,(function(e,t){return s("el-option",{key:t,attrs:{label:e.address,value:e.address}})})),1)],1),s("el-form-item",{attrs:{prop:"names",label:"设备名称:",required:!0}},[s("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"设备名称",autocomplete:"off"},model:{value:e.form.names,callback:function(t){e.$set(e.form,"names",t)},expression:"form.names"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.cancel}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.determine},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.submit(t):null}}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"修改",visible:e.modify},on:{"update:visible":function(t){e.modify=t}}},[s("el-form",{staticClass:"from-window",attrs:{model:e.form,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"设备定点位:",required:!0}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设备点位"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},e._l(e.posData,(function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),s("el-form-item",{attrs:{label:"设备编码:",required:!0}},[s("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"设备编码",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("el-form-item",{attrs:{label:"所属区域:",required:!0}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属区域"},model:{value:e.form.regions,callback:function(t){e.$set(e.form,"regions",t)},expression:"form.regions"}},e._l(e.setData,(function(e,t){return s("el-option",{key:t,attrs:{label:e.address,value:e.address}})})),1)],1),s("el-form-item",{attrs:{label:"设备名称:",required:!0}},[s("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"设备名称",autocomplete:"off"},model:{value:e.form.names,callback:function(t){e.$set(e.form,"names",t)},expression:"form.names"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.cancel}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.modifys},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.submit(t):null}}},[e._v("确 定")])],1)],1)],1)},o=[],r=s("2798"),i=[{date:"1",name:"东1门",codding:"CS0001",address:"数字产业园A1",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林",names:""},{date:"2",name:"东2门",codding:"CS0002",address:"数字产业园A2",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林",names:""},{date:"3",name:"东3门",codding:"CS0003",address:"数字产业园A3",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林",names:""},{date:"4",name:"东4门",codding:"CS0004",address:"数字产业园A4",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林",names:""},{date:"5",name:"东5门",codding:"CS0005",address:"数字产业园A5",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林",names:""},{date:"6",name:"东6门",codding:"CS0006",address:"数字产业园A6",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林",names:""}],n=s("f75d"),l=s("21a6"),m=s.n(l),d=s("1146"),c=s.n(d),u={name:"TestPage",data(){return{formInline:{user:"",region:""},formQuery:{user:"",region:""},dialogFormVisible:!1,modify:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",names:"",region:"",regions:""},formLabelWidth:"120px",index:{}}},computed:{tableData(){const e=this.formQuery.region||"",t=this.formQuery.user||"";return this.$store.getters["test1/data"].filter(s=>!(e&&(!s.address||s.address.indexOf(e)<0))&&!(t&&(!s.codding||s.codding.indexOf(t)<0)))},tableCount(){return this.$store.getters["test1/count"]},setData(){return this.$store.getters["test2/data"]},posData(){return this.$store.getters["test/data"]}},created(){var e=this;document.onkeydown=function(t){let s=window.event.keyCode;13===s&&1==e.dialogFormVisible?e.submit():13===s&&1==e.modify&&e.submits()}},methods:{deleteRow(e,t){this.$confirm("此操作将永久删除该设备管理, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{t.splice(e,1),this.$message({type:"success",message:"删除成功!",duration:1e3})}).catch(()=>{this.$message({type:"info",message:"已取消删除",duration:1e3})})},submit(){this.determine()},cancel(){this.dialogFormVisible=!1,this.modify=!1,this.form.region="",this.form.name="",this.form.regions="",this.form.names=""},onSubmit(){this.formQuery.user=this.formInline.user,this.formQuery.region=this.formInline.region},add(){this.dialogFormVisible=!0},exportClick(){let e=new Date,t="设备管理",s=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),r=e.getHours(),i=e.getMinutes(),n=t+" "+s+"-"+a+"-"+o+" "+r+"："+i;var l=c.a.utils.table_to_book(document.querySelector(".table")),d=c.a.write(l,{bookType:"xlsx",bookSST:!0,type:"array"});try{m.a.saveAs(new Blob([d],{type:"application/octet-stream"}),n+".xlsx")}catch(u){"undefined"!==typeof console&&console.log(u,d)}return d},handleClick(e,t){this.modify=!0,console.log(e);const s=e;this.form.region=s.name,this.form.name=s.codding,this.form.regions=s.address,this.form.names=s.names,this.index=s},modifys(){""===this.form.region||""===this.form.name||""===this.form.regions||""===this.form.names?this.$message.error("操作失败！请将内容补充完整"):(this.$message({message:"操作成功",type:"success",duration:1e3}),this.index.name=this.form.region,this.index.codding=this.form.name,this.index.address=this.form.regions,this.index.names=this.form.names,setTimeout(()=>{this.modify=!1,this.form.name="",this.form.codding="",this.form.address="",this.form.names=""},500))},determine(){""===this.form.region||""===this.form.name||""===this.form.regions||""===this.form.names?this.$message.error("添加失败！请将内容补充完整"):(this.$message({message:"添加成功",type:"success",duration:1e3}),this.$store.commit("test1/add",{name:this.form.region,codding:this.form.name,address:this.form.regions,names:this.form.names,user:"系统管理员"}),setTimeout(()=>{this.dialogFormVisible=!1,this.form.region="",this.form.name="",this.form.regions="",this.form.names=""},500))}},mounted:function(){this.$store.commit("test1/pull",i),this.$store.commit("test/pull",r["a"]),this.$store.commit("test2/pull",n["a"])}},f=u,p=(s("b7bc"),s("2877")),g=Object(p["a"])(f,a,o,!1,null,"65dddd8f",null);t["default"]=g.exports},2798:function(e,t,s){"use strict";t["a"]=[{date:"1",name:"东1门",codding:"CS0001",address:"数字产业园A1",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林"},{date:"2",name:"东2门",codding:"CS0002",address:"数字产业园A2",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林"},{date:"3",name:"东3门",codding:"CS0003",address:"数字产业园A3",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林"},{date:"4",name:"东4门",codding:"CS0004",address:"数字产业园A4",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林"},{date:"5",name:"东5门",codding:"CS0005",address:"数字产业园A5",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林"},{date:"6",name:"东6门",codding:"CS0006",address:"数字产业园A6",user:"系统管理员",maps:"重庆市渝北区柳林",map:"重庆渝北区柳林"}]},a6f5:function(e,t,s){},b7bc:function(e,t,s){"use strict";var a=s("a6f5"),o=s.n(a);o.a}}]);
//# sourceMappingURL=chunk-3a38ea7e.9aca16e7.js.map